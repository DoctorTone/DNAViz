var RepresentationGroup=function(component,name,selection,representations,defaultParameters){selection=typeof selection==="undefined"?null:selection;representations=typeof representations==="undefined"?null:representations;defaultParameters=typeof defaultParameters==="undefined"?{}:defaultParameters;this.component=component;this.name=name;this.selection=selection;this.defaultParameters=defaultParameters;this.visible=false;this.reprList=[];var self=this;if(representations)representations.forEach(function(repr){self.addRepresentation(null,repr)})};RepresentationGroup.prototype.addRepresentation=function(display_name,repr,selection){selection=typeof selection==="undefined"?null:selection;repr.display_name=display_name;repr.setParameters(this.defaultParameters);if(selection)repr.setSelection(selection);else if(this.selection)repr.setSelection(this.selection);repr.setVisibility(false);this.reprList.push(repr);return this};RepresentationGroup.prototype.toggle=function(){this.visible=!this.visible;this.update()};RepresentationGroup.prototype.setVisibility=function(what){this.reprList.forEach(function(repr){repr.setVisibility(what)})};RepresentationGroup.prototype.setParameters=function(what){this.reprList.forEach(function(repr){repr.setParameters(what)})};RepresentationGroup.prototype.setComponentParameters=function(index,what){if(index<0||index>=this.reprList.length){console.log("Invalid index");return}this.reprList[index].setParameters(what)};RepresentationGroup.prototype.setSelection=function(what){this.reprList.forEach(function(repr){repr.setSelection(what)})};RepresentationGroup.prototype.update=function(){this.setVisibility(this.visible)};RepresentationGroup.prototype.all_empty=function(){return this.reprList.every(function(repr){return repr.repr.structureView.atomCount==0})};RepresentationGroup.prototype.GUI=function(class_name,enabled){enabled=typeof enabled==="undefined"?false:enabled;if(this.all_empty())return null;var self=this,c=$("<div/>",{class:class_name});this.enabled=0;if(enabled){this.toggle(true)}c.append($("<div/>").append($("<input/>",{type:"checkbox",id:class_name,checked:enabled}).click(function(e){self.toggle(this.checked)}),$("<label/>",{for:class_name}).append(this.name)));if(this.reprList.length>1){var d=$("<div/>",{class:"naradio"}),radioname=class_name+"radio";this.reprList.forEach(function(repr,i){d.append($("<span/>").append($("<input/>",{type:"radio",name:radioname,id:radioname+"_"+i,checked:i==0}).click(function(e){self.enable(i)}),$("<label/>",{for:radioname+"_"+i}).append(capitalize(repr.display_name)),"&nbsp;"))});c.append(d)}this.update();return c};var MutuallyExclusiveRepresentationGroup=function(component,name,selection,representations,defaultParameters){RepresentationGroup.call(this,component,name,selection,representations,defaultParameters);this.enabled=-1};MutuallyExclusiveRepresentationGroup.prototype=Object.create(RepresentationGroup.prototype);MutuallyExclusiveRepresentationGroup.prototype.enable=function(ci){ci=typeof ci==="undefined"?-1:ci;if(ci<this.reprList.length)this.enabled=ci;this.update()};MutuallyExclusiveRepresentationGroup.prototype.nenable=function(name){var i=this.reprList.findIndex(function(repr){return repr.name==name});this.enable(i);return i};MutuallyExclusiveRepresentationGroup.prototype.update=function(){this.setVisibility(false);if(this.visible&&this.enabled>=0)this.reprList[this.enabled].setVisibility(true)};